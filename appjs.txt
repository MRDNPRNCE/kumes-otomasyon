function connectWebSocket() {
    const wsUrl = `ws://${esp32IP}:81`;
    console.log(`ðŸ”Œ WebSocket baÄŸlanÄ±yor: ${wsUrl}`);
    
    updateConnectionStatus(false);
    
    try {
        ws = new WebSocket(wsUrl);
        
        ws.onopen = () => {
            console.log('âœ… WebSocket baÄŸlandÄ±');
            updateConnectionStatus(true);
            showNotification('âœ… BaÄŸlantÄ± kuruldu!');
            
            // Ä°lk durum sorgula
            sendCmd('STATUS');
        };
        
        ws.onmessage = (event) => {
            console.log('ðŸ“¥ Veri alÄ±ndÄ±:', event.data);
            handleData(event.data);
        };
        
        ws.onerror = (error) => {
            console.error('âŒ WebSocket hatasÄ±:', error);
            updateConnectionStatus(false);
        };
        
        ws.onclose = () => {
            console.log('âš ï¸ WebSocket baÄŸlantÄ±sÄ± kesildi');
            updateConnectionStatus(false);
            showNotification('âš ï¸ BaÄŸlantÄ± kesildi');
            
            // 5 saniye sonra tekrar baÄŸlan
            if (reconnectTimer) clearTimeout(reconnectTimer);
            reconnectTimer = setTimeout(() => {
                console.log('ðŸ”„ Yeniden baÄŸlanÄ±yor...');
                connectWebSocket();
            }, 5000);
        };
    } catch (error) {
        console.error('âŒ WebSocket oluÅŸturma hatasÄ±:', error);
        updateConnectionStatus(false);
    }
}
setInterval(() => {
   if (ws && ws.readyState === WebSocket.OPEN) {
        sendCmd('STATUS');
    }
}, 5000);